# Agentic Guidelines

This file contains instructions and context for AI coding agents operating in this repository.

## 1. Project Context
- **Type:** Single-page Web Application (React + Vite)
- **Language:** TypeScript
- **Styling:** Tailwind CSS (v4)
- **State Management:** Local React State (`useState`, `useReducer` recommended for complex game logic)
- **Key Directories:**
  - `src/components`: UI components (visual only, avoid heavy logic)
  - `src/hooks`: Custom hooks for game logic
  - `src/types`: TypeScript interfaces and types
  - `src/utils`: Helper functions (pure functions preferred)

## 2. Build & Verification Commands
Always verify changes before submitting.

- **Start Dev Server:** `npm run dev`
- **Build Production:** `npm run build`
  - *Note:* This runs `tsc -b` (Type check) followed by `vite build`.
  - **CRITICAL:** Ensure `npm run build` passes. It is the primary correctness check.
- **Linting:** `npm run lint` (ESLint)
- **Type Checking (Standalone):** `npx tsc --noEmit`

### Running Tests
*Currently, no test runner (Vitest/Jest) is configured.*
- If adding tests, prefer **Vitest**.
- Install: `npm install -D vitest`
- Run: `npx vitest`

## 3. Code Style & Conventions

### Imports
- **Grouping:** 
  1. React/External libraries
  2. Internal absolute/relative imports
  3. Styles (if not using Tailwind classes exclusively)
- **Type Imports:** ALWAYS use `import type { Foo }` for interfaces/types.
  - *Why:* `verbatimModuleSyntax` is enabled in `tsconfig.json`.

### TypeScript
- **Strictness:** Strict mode is enabled. No `any`.
- **Interfaces vs Types:** Use `interface` for object definitions (props, state), `type` for unions/aliases.
- **Props:** Define component props as `interface ComponentProps { ... }`.

### Components (React)
- **Functional Components:** Use `const Component: React.FC<Props> = ...` or `function Component({ prop }: Props)`.
- **Hooks:** Extract complex logic (especially game rules) into custom hooks (e.g., `useSolitaire`).
- **Rendering:** Avoid inline function definitions in JSX if they cause re-render issues, but premature optimization is not required.

### Styling (Tailwind CSS)
- **Utility First:** Use Tailwind utility classes directly in `className`.
- **Colors:** Use the extended palette in `tailwind.config.js` (e.g., `bg-felt-green`).
- **Responsive:** Mobile-first approach is not strictly enforced for this desktop-centric game layout, but ensure layout doesn't break on resize.

### Naming Conventions
- **Files:** PascalCase for React components (`Card.tsx`), camelCase for utilities/hooks (`cardUtils.ts`).
- **Variables:** camelCase (`const deck = ...`).
- **Constants:** UPPER_CASE for static configuration (`const SUITS = ...`).
- **Types:** PascalCase (`interface GameState`).

## 4. Error Handling
- **UI:** Fail gracefully. If game state is invalid, show an error boundary or reset game button.
- **Logic:** Use explicit return types. Avoid throwing errors in game logic paths; prefer returning `false` or `null` for invalid moves.

## 5. Specific Rules for Solitaire Logic
- **Immutability:** Game state updates must be immutable. Use spread syntax `...` or `structuredClone` (if supported environment).
- **Deck Management:** Cards are objects with `{ id, suit, rank, isFaceUp }`.
- **Validation:** Move validation logic should reside in `src/hooks` or `src/utils`, not in UI components.

## 6. Git & Commit Protocol
- **Commits:** Conventional Commits style (e.g., `feat: add shuffle logic`, `fix: card overlap issue`).
- **Safety:** Do not force push.

---
*Generated by opencode*
